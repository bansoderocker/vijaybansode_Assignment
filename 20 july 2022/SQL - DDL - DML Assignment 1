USE PITECH


CREATE TABLE CUSTOMER (
CUSTOMERID NUMERIC(3) PRIMARY KEY,
CUSTOMERNAME VARCHAR(20) NOT NULL
)

CREATE TABLE CATEGORY(
CATEGORYID NUMERIC(3) PRIMARY KEY,
CATEGORYNAME VARCHAR(20) NOT NULL UNIQUE,
DISCRIPTION VARCHAR(20)
)

CREATE TABLE PRODUCT (
PRODUCTID NUMERIC(3) PRIMARY KEY,
PRODUCTNAME VARCHAR(20) NOT NULL,
CATEGORYID NUMERIC(3) REFERENCES CATEGORY(CATEGORYID),
PRICE NUMERIC(10,2) CHECK (PRICE>50) ,
QUANTITY NUMERIC(3) CHECK (QUANTITY > 0)
)

CREATE TABLE ORDERS (
ORDERYEAR NUMERIC(3),
ORDERMONTH VARCHAR(20),
ORDERID VARCHAR(20),
ORDERDATE DATETIME DEFAULT GETDATE(),
PRODUCTID NUMERIC(3) REFERENCES PRODUCT(PRODUCTID),
CUSTOMERID NUMERIC(3) REFERENCES CUSTOMER(CUSTOMERID),
ORDQRY NUMERIC(3) CHECK (ORDQRY > 0),
CONSTRAINT PK_ORDERS_YEAR_MONTH_ID PRIMARY KEY(ORDERYEAR,ORDERMONTH,ORDERID)

)

---------Add Address column
ALTER TABLE  CUSTOMER 
ADD ADDRESS VARCHAR(20)

----- Modify order year and month datatype 
ALTER TABLE ORDERS DROP CONSTRAINT PK_ORDERS_YEAR_MONTH_ID


ALTER TABLE ORDERS
ALTER COLUMN ORDERYEAR NUMERIC(4) NOT NULL

ALTER TABLE ORDERS
ALTER COLUMN ORDERMONTH INT NOT NULL

ALTER TABLE ORDERS 
ALTER COLUMN ORDERID VARCHAR(20) NOT NULL

ALTER TABLE ORDERS 
ADD CONSTRAINT PK_ORDERS_YEAR_MONTH_ID 
PRIMARY KEY (ORDERYEAR,ORDERMONTH,ORDERID)

--------- Drop DISCRIPTION 
ALTER TABLE CATEGORY
DROP COLUMN DISCRIPTION

------------Insert All Data

INSERT INTO CUSTOMER VALUES(1,'AJAY','MUMBAI')
INSERT INTO CUSTOMER VALUES(2,'CHIRAG','DELHI')
INSERT INTO CUSTOMER VALUES(3,'AMIT','PUNE')


INSERT INTO CATEGORY (CATEGORYID, CATEGORYNAME) VALUES (1,'FOOD')
INSERT INTO CATEGORY (CATEGORYID, CATEGORYNAME) VALUES (2,'ELECTRONICS')
INSERT INTO CATEGORY (CATEGORYID, CATEGORYNAME) VALUES (3,'STATIONARY')


INSERT INTO PRODUCT VALUES(101,'TEA', 1 ,60 ,100)
INSERT INTO PRODUCT VALUES(102,'PEN', 3 ,80 ,50)
INSERT INTO PRODUCT VALUES(103,'NOTE BOOK', 3, 125, 200)
INSERT INTO PRODUCT VALUES(104,'COFFEE', 1 ,80 ,100)
INSERT INTO PRODUCT VALUES(105,'TV', 2 ,15000 ,5)
INSERT INTO PRODUCT VALUES(106,'WASHING MACHINE', 2 ,12000 ,3)
						   

INSERT INTO ORDERS(ORDERYEAR,ORDERMONTH,ORDERID,ORDERDATE,PRODUCTID,CUSTOMERID,ORDQRY)
 VALUES (2010, 1, 1,GETDATE(), 101, 2 ,10),
		(2010, 1, 2,GETDATE(), 104, 1 ,2 ),
		(2010, 2, 1,GETDATE(), 105, 3 ,1 ),
		(2010, 2, 2,GETDATE(), 101, 1 ,5 ),
		(2010, 2, 3,GETDATE(), 106, 2 ,1 ),
		(2011, 1, 1,GETDATE(), 104, 1 ,2 )

----------------------------------
SELECT * FROM CUSTOMER
SELECT * FROM CATEGORY
SELECT * FROM PRODUCT
SELECT * FROM ORDERS


-- DROP TABLE ORDERS
-- DROP TABLE PRODUCT
-- DROP TABLE CATEGORY
-- DROP TABLE CUSTOMER



